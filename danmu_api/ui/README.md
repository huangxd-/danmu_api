# UI 系统使用说明

本项目包含一个基于 Web 的用户界面，用于管理和配置弹幕 API 服务。以下是 UI 系统的详细使用说明。

## 功能概览

UI 系统提供了以下主要功能模块：

1. **配置预览** - 查看当前生效的环境变量配置
2. **日志查看** - 实时查看系统运行日志
3. **接口调试** - 测试和调试 API 接口
4. **推送弹幕** - 向播放器推送弹幕
5. **系统配置** - 环境变量配置和系统管理

## 访问方式

UI 系统需要通过在 URL 中添加 TOKEN 来访问，以确保安全性：

- 普通功能访问：`http://your-domain/{TOKEN}`
- 系统管理功能：`http://your-domain/{ADMIN_TOKEN}`

## 功能详解

### 1. 配置预览

在配置预览页面，您可以：

- 查看当前生效的环境变量配置
- 了解各配置项的当前值和描述
- 配置按类别分组显示（API配置、源配置、匹配配置等）

### 2. 日志查看

日志查看页面提供：

- 实时日志监控
- 刷新日志功能
- 清空日志功能（需要 ADMIN_TOKEN）

### 3. 接口调试

接口调试功能允许您：

- 选择不同的 API 接口进行测试
- 输入接口参数
- 发送请求并查看响应结果
- 支持的接口包括：
  - 搜索动漫 - `/api/v2/search/anime`
  - 搜索剧集 - `/api/v2/search/episodes`
  - 匹配动漫 - `/api/v2/match`
  - 获取番剧详情 - `/api/v2/bangumi/:animeId`
  - 获取弹幕 - `/api/v2/comment/:commentId`

### 4. 推送弹幕

推送弹幕功能支持：

- 向 OK 影视等播放器推送弹幕
- 搜索动漫并选择剧集
- 推送地址格式如：`http://127.0.0.1:9978/action?do=refresh&type=danmaku&path=`
- 需要在同一局域网或使用公网 IP

### 5. 系统配置

系统配置页面包含：

#### 环境变量管理
- **API配置** - API 相关设置
- **源配置** - 数据源配置
- **匹配配置** - 匹配算法设置
- **弹幕配置** - 弹幕相关参数
- **缓存配置** - 缓存策略设置
- **系统配置** - 系统级配置

#### 配置项类型
- **文本** - 普通文本输入
- **布尔值** - 开关选择
- **数字** - 数字滚轮输入 (带范围限制)
- **单选** - 从预定义选项中选择
- **多选** - 选择多个选项并可拖动排序

#### 系统管理功能
- **清理缓存** - 清除系统缓存（需要 ADMIN_TOKEN）
- **重新部署** - 重新部署系统（需要 ADMIN_TOKEN）

## 安全说明

- 访问 UI 系统需要在 URL 中配置 TOKEN
- 系统管理功能（日志查看、环境变量配置等）需要 ADMIN_TOKEN
- 确保 TOKEN 和 ADMIN_TOKEN 的安全性

## 部署平台支持

系统支持多种部署平台：

- Node.js
- Vercel
- Netlify
- Cloudflare
- Docker
- EdgeOne

根据部署平台的不同，可能需要配置额外的环境变量。

## API 端点

在 UI 页面顶部显示当前 API 端点，可点击复制到剪贴板。

## 故障排除

- 如果无法访问功能页面，请检查 URL 中的 TOKEN 是否正确
- 如果系统管理功能不可用，请确认 ADMIN_TOKEN 等环境变量是否已配置
- 如遇到其他问题，请查看系统日志获取更多信息
